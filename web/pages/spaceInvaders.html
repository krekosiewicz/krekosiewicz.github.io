<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Space Invaders</title>
    <link rel="stylesheet" href="../global.css">
    <link rel="stylesheet" href="../styles/spaceInvaders.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div style="display:flex;flex-direction:column;padding-bottom:64px;">
    <div style="margin-bottom:16px;" class="navigation">
        <p style="margin-right:16px;"><a href="../">back</a></p>
    </div>
    <div style="width:calc(100% - 32px);max-width:800px;margin:0 auto; position: relative;">
        <div class="startMessage" id="startMessage">
            <p>Press spacebar to start</p>
        </div>
        <div class="gameContainer" id="gameContainer">
            <div class="player"></div>
        </div>
        <div style="display:flex; justify-content: space-between;margin-bottom:16px">
            <p>Score: <span id="score">0</span></p>
            <p>High Score: <span id="highScore">0</span></p>
        </div>
    </div>
    <div id="virtualKeyboardSpace" class="virtualKeyboardSpace"></div>
</div>
</body>
<script type="module">
    import { createFooter } from '../components/footer.js';
    import { initGame } from '../scripts/spaceInvaders.js';

    document.addEventListener('DOMContentLoaded', function() {
        document.body.appendChild(createFooter('simple'));

        const gameContainer = document.getElementById('gameContainer');
        const virtualKeyboardSpace = document.getElementById('virtualKeyboardSpace');
        const viewportHeight = window.innerHeight;
        const keyboardHeight = 124; // Height for the virtual keyboard space
        const containerHeight = viewportHeight - keyboardHeight - 302; // Leave some space for padding and other elements

        gameContainer.style.height = `${containerHeight}px`;
        virtualKeyboardSpace.style.height = `${keyboardHeight}px`;

        const config = {
            containerWidth: gameContainer.clientWidth,
            containerHeight: gameContainer.clientHeight,
            playerSize: 48,
            bulletSize: { width: 4, height: 16 },
            enemySize: 32,
            playerSpeed: 10,
            bulletSpeed: 5,
            enemySpeed: 2
        };
        initGame(config);
    });
</script>
</html>
